{% extends "web/base.html" %} {% block content %}
<style>
/* Modal styles */
.modal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.4);
}

.modal-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 30%;
}

.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}
</style>
<div class="container my-5">
    




  <div class="row">
    <div class="col-md-9">
      <h1 class=" mb-4">Chats</h1>
    </div>
    <div class="col-md-3">
      <a id="openModalBtn" class="btn btn-primary mb-4 mt-4">New Chat</a>
    </div>
</div>

  <div class="row">
    {% for chat in chats %}
    <div class="col-md-4 mb-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Chat with {{ chat.chatbot.name }}</h5>
          <p class="card-text">Created on: </p>
          <a href="{{ url_for('chat', chatbot_id=chat.chatbot.id, chat_id=chat.id) }}" class="btn btn-primary">Continue</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>


<div id="modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="modal-body">
        <!-- Modal content goes here -->
        <h2>New Chat</h2>
        <form method="POST" action="/addchat">
            <div class="modal-body" >
                <div class="form-group">
                    <label for="new_name">Name</label>
                    <input type="text" class="form-control" id="name" name="name" >
                </div>
            <div class="form-group">
              <select class="form-control" name="chatbot_id" id="chatbot_id">
                {% for chatbot in chatbots %}
                <option value="{{ chatbot.id }}">{{ chatbot.name }}</option>
                {% endfor %}
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Start Chat </button>
            </div>
          </div>
        </form>      </div>
    </div>
  </div>
</div>
</div>
</div>
</div>
</div>
</body>
<script>
    window.onload = function() {
      // Get the modal
      var modal = document.getElementById("modal");
  
      // Get the button that opens the modal
      var btn = document.getElementById("openModalBtn");
  
      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];
  
      // When the user clicks on the button, open the modal
      btn.onclick = function() {
        console.log("btn clicked");
        modal.style.display = "block";
      }
  
      // When the user clicks on <span> (x), close the modal
      span.onclick = function() {
        modal.style.display = "none";
      }
  
      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    }
  </script>
  {% endblock %}
